<!DOCTYPE HTML>
<!--
	Story by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Why Some Beers Spark Debate: A Short Walk Through Controversial Brews</title>
		<meta charset="utf-8" />
		<link rel="icon" href="images/icon.png" type="image/x-icon" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
		<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper" class="divided">

				<!-- One -->
					<section class="banner style1 orient-left content-align-left image-position-center fullscreen onload-image-fade-in onload-content-fade-right invert">
						<div class="content">
							<h1><strong>Why Some Beers Spark Debate:</strong></h1>
							<h2>A Short Walk Through Controversial Brews</h2>
							
							<br>
							<br>

							<p class="major">Discover with us the in-depth analysis of the controversiality hidden behind beers.</a></p>
							<ul class="actions stacked">
								<li><a href="#first" class="button big wide smooth-scroll-middle">Get Started</a></li>
							</ul>
						</div>
						<div class="image">
							<img src="images/banner.jpg" alt="" />
						</div>
					</section>

				<!-- Two -->

				<section class="wrapper style1 align-left" id="first">
					<div class="inner">
					<div class="content">

							<blockquote><strong>The best beer is where priests go to drink. For a quart of Ale is a dish for a king.</strong></blockquote>
							<p style="font-size: smaller; font-style: italic; text-align: right; margin-right: 5em;">William Shakespeare</p>

						</div>
					</div>
				</section>

				<section class="wrapper style1 align-left">
					<div class="inner">

						<p>Shakespeare's poetic reference to beer demonstrates its esteemed position in society, even during the 17th century.
							However, even though his preference is solely a personal choice, which would likely be a topic of debate among enthusiasts,
							 beer has a longstanding cultural significance, enjoyed across diverse regions with unique brewing traditions.</p>
							 
					   <p> In the current globalised market, beer has become a shared experience with a wide range of preferences. 
						   While some beers achieved universal acclaim, others have sparked debate due to differences in flavor, regional brewing methods, and cultural context.
						   This dynamic interplay of preference and locality has turned some brews into cultural symbols and conversation starters.</p>

					   <p> The objective is to gain insight into the factors influencing the varying perceptions of beers. 
						   The analysis will focus on several categories: from « controversial » brews, which are those that receive polarised reviews, to « universal » beers, which enjoy more consistent praise. 
						   The study analyses both quantitative ratings and textual reviews in order to examine how sensory attributes, such as aroma, appearance, palate and taste, influence consumer opinion. 
						    Furthermore, we analyse the sentiment within the reviews, identifying recurring keywords and phrases associated with these two types of beers. 
						   The study also examines regional differences and compares the input of novices and experts in order to gain insight into why some beers have broad appeal while others are the subject of intense debate.</p>

					   <p>Grab your favorite brew, and let's explore what the data says about the beers that stir up the strongest reactions.</p>

						<br>
						<br>

						<h2>Research questions</h2>
						<p>The following key questions define how this study is structured and what are the main topic that we will explore.</p>						
						<ul class="default" style="margin-left: 50px;">
							<li>How can we classify beers based on the controversiality? Which numerical graded attributes are most associated with beers perceived as controversial? Can we use the textual review to enhance our classification ?</li>
							<li>Are there features explaining this classification? Are the feature dependant on the beer itself? </li>
							------------------------------------------------------------------------------------------------------------
							<li>How can we define controversiality and can we distinguish these two classes effectively?</li>
							<br>
							<li>Is the text review coherent with the numerical grade given by the user ? Can we use this text to enhance our controversiality definition ?</li>
							<br>
							<li>Which attributes, such as aroma, appearance, palate, and taste, are most associated with a beer being perceived as controversial?</li>
							<br>
							<li>Are certain regions more likely to produce controversial beers or to have distinct, less popular opinions? Are locally brewed beers rated more controversially compared to foreign ones?</li>
							<br>
							<li>Does the number of reviews made by the reviewer contribute to controversial ratings? Does the origin of the rater have an impact on the rating?</li>
						</ul>
					</div>
				</section>

				<section class="wrapper style1 align-left">
					<div class="inner">
						<header>
							<h2>Data presentation</h2>
						</header>

						<p>
							To ensure consistency in our analysis, we formatted all data, including text, into CSV files.
							This allowed us to dive deeper into the dataset and uncover an interesting pattern: breweries, beers, and users were present in both RateBeer and BeerAdvocate.	We also found instances where a single brewery in one dataset corresponded to multiple entries in the other.
							Since our objective is to determine whether a beer is more controversial or universally accepted, we merged the two datasets into one.
							The result is a unified dataset encompassing beers, breweries, users, and reviews, with consistent ID  matching across all features.
							More details on how the datasets were merged can be found <a href="https://github.com/epfl-ada/ada-2024-project-abracadabra/blob/main/data/README.md" target="_blank">here</a>.
						<!-- TODO: CHECK LINK! -->
						</p>
						<p>
							With the data now organized into a more accessible format, we can begin examining its core content. We start by looking at some key numbers.
						</p>
						<div class="image" style="text-align: center;">
							<h3 style="text-align: center;"><strong>Dataset summary</strong></h3>
							<img src="images/dataset_summary.png" style="max-width: 100%; height: auto;"/>
						</div>
						<p>
							This dataset provides a rich source of information for our analysis. Notably, approximately <strong>90% of the beers have at least one review</strong>, ensuring that our findings will be both meaningful and insightful.
							For this project, we will focus solely on these beers.
						</p>
						<p>
							It is important to acknowledge, however, that the dataset is not fully representative. A significant portion of the reviews comes from American users, meaning our analysis primarily reflects their preferences and tastes.
							We decided not to rebalance the dataset, as doing so would have excluded many brews and reviews, that are still relevant to our analysis.
    						Below is a visualization highlighting the 20 countries with the most reviews in our dataset.
						</p>
						<div class="flourish-embed flourish-hierarchy" data-src="visualisation/20776364"><h3 style="text-align: center;"><strong>Top countries by number of beer ratings</strong></h3><script src="https://public.flourish.studio/resources/embed.js"></script><noscript><img src="https://public.flourish.studio/visualisation/20776364/thumbnail" width="100%" alt="hierarchy visualization" /></noscript></div>
						<!-- TODO: How do we change "number of ratings" to "number of reviews"? -->
						<p>
							Reviews from both websites follow a similar structure: users rate the appearance, aroma, palate, and taste of each beer, as well as provide an overall grade.
							However, we encounter our first challenge: the grading scales differ between the two datasets, complicating direct comparison. Let’s see how we address this!
							<!-- TODO: Not sure about the "!" -->

						</p>

						<p>
							BeerAdvocate uses a 1 to 5 scale (with 0.25 increments) for all attributes, while RateBeer employs varying scales: aroma and taste (1 to 10), appearance and palate (1 to 5), and overall (1 to 20), all with 1-point increments.
							To standardize the data, we converted all ratings to a unified 1-to-5 scale, as this range is the most widely used. While differences in granularity between the datasets remain, these will be further explored in our analysis.
						</p>
					</div>
				</section>

				<section class="wrapper style1 align-left">
					<div class="inner">
						<header>
							<h2>Exploring the definition of controversiality</h2>
						</header>

						<p>
							To identify controversiality in our dataset, we first need to define what it means and how to measure it. Let’s start with a general definition:
						</p>
						<dl>
							<dt>Controversial:</dt>
							<dd>
								<p>"subject of intense public argument, disagreement, or disapproval" 
								<sup>[<a href="https://www.collinsdictionary.com/dictionary/english/controversial" target="_blank" rel="noopener noreferrer">1</a>]</sup>
								</p>
							</dd>
						</dl>
						<p>
							While this definition is broad and applies to various situations, our analysis narrows it to beers with the most polarised reviews: those who are most likely to spark disagreement, even with a Shakespeare fan in the room.
							We base our analysis on user ratings across appearance, aroma, palate, taste and overall features as well as textual reviews.
							<br>
							We begin by analysing the variance in user ratings, which describes the level of disagreement around the average score.
            				Since variance is dimension-independent, it provides a consistent measure across attributes, relying uniquely on the given ratings.
							<br>
							<br>
							We also noticed that beers with fewer ratings tend to show higher variability (e.g., two extreme opinions).
							To ensure reliable results, we exclude beers with fewer than a specified minimum number of ratings or reviews.
							<br>
							We chose a threshold of <strong>25</strong> reviews or ratings, which balances data inclusion with reliable variance measurement. More details on this decision can be found <a href="https://github.com/epfl-ada/ada-2024-project-abracadabra/blob/main/data/README.md" target="_blank">here</a>.
							<!-- TODO: CHECK LINK! -->
						</p>
						<h4><strong>First classification</strong></h4>
						<p>
							With the data cleaned, the first step in classifying beers as controversial or not involves analyzing
							the variances of each attribute
							<br>
							The following plot shows the distribution of variances for each attribute.
						</p>
						<p>
							At first, it may seem logical to use the variance of the overall grade, as it reflects a combination of each attribute.
							However, setting a threshold for this variance presents challenges.
							A <a href="https://github.com/epfl-ada/ada-2024-project-abracadabra/blob/main/data/README.md" target="_blank">deeper analysis</a> revealed
							that while an arbitrary threshold could work reasonably well, it primarily highlighted taste as the most polarizing factor.
							We believe that relying solely on a single parameter oversimplifies controversiality, and that it is inherently multi-dimensional and influenced by the interaction of all attributes.
						</p>

						<h4><strong>Clustering</strong></h4>

						<p>
							Recognizing the limitations of a one-dimensional approach, we turned to a clustering method.
							We chose to use a Gaussian Mixture Model (GMM), factoring in the variances of all five attributes to group beers as either controversial, neutral, or universal.
							This allows us to capture complex patterns in the data.
							<br>
							<br>
							Using the elbow method on the negative log-likelihood plot, we determined three clusters to be optimal.
							This aligns well with the goal of categorizing beers into three groups: controversial, neutral, and universal.
						</p>
						<div class="image" style="text-align: center;">
							<img src="images/gmm_label.png" style="max-width: 100%; height: auto;"/>
						</div>
						<p>
							The clusters were computed using standardized variances. 
							They serve as our key metric for controversiality: High variance indicates controversy or disagreement, while low variance suggests a universal appeal.
							The plot shows scaled variances, where smaller values (near 0) represent low variance, and larger values indicate high variance. 
							Based on this, we define the clusters as follows:
						</p>
						<ul>
							<li>Cluster 0 : Controversial beers, representing 8.96% of the beers.</li>
							<li>Cluster 1 : Universal beers, representing 41.41% of the beers.</li>
							<li>Cluster 2 : Neutral beers, representing 49.63% of the beers.</li>
						</ul>

						<br>

						<h2>Extracting insights from textual reviews</h2>

						<p>
							The Gaussian Mixture Model offers a more effective analysis by considering the interaction of all attributes.
							We are now going to extend our exploration by including insights from textual reviews to better define beer controversiality.
							Our first approach was to use a <a href="https://github.com/epfl-ada/ada-2024-project-abracadabra/blob/main/src/scripts/sentiment%20analysis/README.md" target="_blank">sentiment analysis model</a> on every qualitative review.
							Using the first 6,000 comments, we identified the most accurate model, classifying each review as either Positive, Neutral, or Negative.
							Due to the lack of true labels for validation, we compared model performance based on similarity, ultimately selecting a BERT-based model for its optimal accuracy-to-cost ratio for local execution.

							<br>
							<br>

							With this new information, we attempted the Gaussian Mixture Model again, this time incorporating sentiment classifications.
							Three models were constructed, each categorizes beers into three categories (Controversial, Universal and Neutral), but differs in the data used:
							<ul>
								<li><strong>Model 1</strong> is computed for all ratings.</li>
								<li><strong>Model 2</strong> is computed only for ratings with text with sentiment label.</li>
								<li><strong>Model 3</strong> is computed only for ratings with text without sentiment labels.</li>
							</ul>
						</p>
						<div class="image" style="text-align: center;">
							<h3 style="text-align: center;"><strong>Percentage of beers that have the same labels between models</strong></h3>
							<img src="images/similarity_sentiment.png" style="max-width: 100%; height: auto;"/>
						</div>
						<p>
							Restricting the data to only reviews with text results in a <strong>13% loss</strong> in the dataset size.
							Despite the additional information provided by sentiment analysis, the results showed that the similarity between
							the models was high, suggesting that sentiment analysis did not significantly alter the classification.
							Considering the lack of improvement in classification accuracy, the loss of data and the uncertainty added by the sentiment analysis,
							we will follow without using the sentiment analysis.
						</p>

						<h2>Exploring the definition of controversiality</h2>

						<p>
							Now that we have a good classification for the controversiality of the beers, we can start to explore the data to find the reasons behind it.
						</p>

						<p>
							<h4><strong>Alcohol By Volume</strong></h4>

							Alcohol By Volume (ABV) is a key attribute of beer, influencing its taste and aroma. 
							We found, as expected, that extreme values of ABV are related to the controversilty of the beer. 
							Moreover, the most common beers (with ABV between 4% and 10%) are the most universal.
							One thing interesting is that in these universal beers, the more ABV, the more universal the beer is. 
							This would mean that people from this website tends to truly agree on relatively strong beers (between 7% and 10%), whether they like it or not.
							The following plot shows the distribution of beers and classification.
						</p>
						<div class="image" style="text-align: center;">
							<img src="images/abv.png" style="max-width: 100%; height: auto;"/>
						</div>

						----- VALENTIN
						<p>
							By analysing the evolution of the proportion of the classification of the beers per level of alcohol by volume we can extract two main points:
							<ul>
								<li>The proportion of universal beers increases with the alcohol by volume, whereas the proportion of controversial and neutral beers decreases.</li>
								<li>The more alcohol by volume the less beers there is after a peak around 5%. This leads to oscillations of the proportions when there is not enough beers left. After a certain level we could conclude that there are no universal beers left, however the low number of beers at this level is unsuficient to conclude this.</li>
							</ul>
							<h4><strong>Number of ratings per beer</strong></h4>
						</p>
						<div class="image" style="text-align: center;">
							<img src="images/number_of_ratings.png" style="max-width: 100%; height: auto;"/>
						</div>
						<p>
							The study of the number of rating didn't prove as fruitful in gain of information. The number of beers slowly decreases with the number of ratings. Finally the universal and controversial beers proportion slightly increase, however those are two opposite clusters and does not make it more easy to find a trend.

							<h4><strong>Level of the user</strong></h4>
						</p>
						<div class="image" style="text-align: center;">
							<img src="images/user_level.png" style="max-width: 100%; height: auto;"/>
						</div>
						<p>
							For this data analysis study we had the fantasy where we believed that the depending of the level of the users, he would grade beers differently. By level we mean that a user is first classified as novice, after having made 20 ratings he becomes an enthusiast and after 800 ratings he reaches the level of connoisseur. From the study we clearly see that the proportion of controversial and neutral rated beers decreases. The more a user rates beer the more he starts to grade universal beers. One would need to study the graders behavior to understand why they increase the proportion of universal beers. 
						</p>
						----- VALENTIN
						<p>
							<h4><strong>Number of reviews</strong></h4>
							
							We performed a similar analysis for the number of reviews per beer, showing that independently of the number of reviews, the distribution of the controversiality of the beers remains the same.
							From our analysis the amount of rating is negligibly correlated with the increase or decrease between the proportion of the beers classification.
							Furthermore the total amount of beer per rating is a heavy tail distribution. This lead us to believe that the number of rating impact on our analysis after the 
							threshold we set is smaller.
						</p>
						<div class="image" style="text-align: center;">
							<img src="images/number_users.png" style="max-width: 100%; height: auto;"/>
						</div>
						<p>
							<h4><strong>Expertise level of the user</strong></h4>
							It is important to also consider which user made the review, the severity and controversialy is probably different at the first review compared to the 5,000th one.
							We classified the user in three categories: novice, enthusiasts and connoisseurs. 
							The more advanced an user is, the less there reviews are controversial and neutral. However, the proportion of universal ratings increase.
							This is interesting as it may show an effect from other reviews, or on the other side, a bias of expertise as reviews from connoisseurs may be taken more seriously than beginners.

						</p>
						<div class="image" style="text-align: center;">
							<img src="images/connoisseurs.png" style="max-width: 100%; height: auto;"/>
						</div>

						<p>
							<h4><strong>Country of the users</strong></h4>

							Remembering that around half of the reviews come from the U.S.A, the following maps show the the frequency of labels (neutral, universal or controversial) per country, by the user from this country. 
							Please note that some countries are less relevant than other ones here, especially those where alcohol drinking is not in the culture, resulting in a very low number of review.

							<br>
							<br>

							<div class="image-box">
								<select id="imageSelector" onchange="switchImage()">
									<option value="images/chauvin_controversial.png">Controversial</option>
									<option value="images/chauvin_neutral.png">Neutral</option>
									<option value="images/chauvin_universal.png">Universal</option>
								</select>
								<img id="displayedImage" src="images/chauvin_controversial.png" alt="Choose a map">
							</div>
						
							<script>
								function switchImage() {
									const imageSelector = document.getElementById('imageSelector');
									const displayedImage = document.getElementById('displayedImage');
									displayedImage.src = imageSelector.value;
								}
							</script>
						</p>
						<p>
							<h4><strong>Location of the brewery</strong></h4>
							Just like the user origin, we wanted to analyse the origin of the beer. 
							The aim is to see if countries have a higher proportion of beers coming from their country labels as controversial for example. 
							For this study we would expect the percentage of the different countries to lie around 37, 53 and 10% for the proportion of universal,
							controversial and neutral beers. 
							<br>
							<br>
							<div class="image-box">
								<select id="imageSelector2" onchange="switchImage2()">
									<option value="images/brewery_controversial.png">Controversial</option>
									<option value="images/brewery_neutral.png">Neutral</option>
									<option value="images/brewery_universal.png">Universal</option>
								</select>
								<img id="displayedImage2" src="images/brewery_controversial.png" alt="Choose a map">
							</div>
							<script>
								function switchImage2() {
									const imageSelector = document.getElementById('imageSelector2');
									const displayedImage = document.getElementById('displayedImage2');
									displayedImage.src = imageSelector.value;
								}
							</script>
						</p>
						<p>
							<h4><strong>Score of comment habit</strong></h4>
							Finally we defined a score of comment habit. This score tells us if a users from country tend to rate a higher proportion of beers
							coming from their own country or from foreign ones. On the following map the score tends to one if the proportion of a let's say universal 
							<br>
							<br>
							<div class="image-box">
								<select id="imageSelector3" onchange="switchImage3()">
									<option value="images/score_controversial.png">Controversial</option>
									<option value="images/score_neutral.png">Neutral</option>
									<option value="images/score_universal.png">Universal</option>
								</select>
								<img id="displayedImage3" src="images/score_controversial.png" alt="Choose a map">
							</div>
							<script>
								function switchImage3() {
									const imageSelector = document.getElementById('imageSelector3');
									const displayedImage = document.getElementById('displayedImage3');
									displayedImage.src = imageSelector.value;
								}
							</script>
						</p>
					</div>
				</section>

				<!-- PLOT EXAMPLE
				<div class="iframe-container">
					<iframe src="assets/plots/aabv_plot.html" class="responsive-iframe"></iframe>
				</div>
				-->

				<!-- Team Section -->
					<section class="wrapper style1 align-center">
						<div class="inner big">
							<h2>Meet the team</h2>
							<div class="items style1 medium onscroll-fade-in">
								<section>
									<span class="icon style2 major fa-user"></span>
									<h3>Alan Wicht</h3>
									<p>Alan is a data scientist.</p>
								</section>
								<section>
									<span class="icon style2 major fa-user"></span>
									<h3>Gustave Lapierre</h3>
									<p>Gustave is a data scientist.</p>
								</section>
								<section>
									<span class="icon style2 major fa-user"></span>
									<h3>Jehan Piaget</h3>
									<p>Jehan is a data scientist.</p>
								</section>
								<section>
									<span class="icon style2 major fa-user"></span>
									<h3>Mattéo Fiore</h3>
									<p>Mattéo is a data scientist and webmaster.</p>
								</section>
								<section>
									<span class="icon style2 major fa-user"></span>
									<h3>Valentin Perret</h3>
									<p>Valentin is a data scientist.</p>
								</section>
							</div>
						</div>
					</section>
				<section class="wrapper style1 center">
					<div class="inner">
						<header>
							<h2>To go further</h2>
						</header>
						<p>
							During our study we found that the clusters where sensitive to the number of beers used. Ensuring th have as many beers as possible
							would ensure more robust results and mainly clusters. However for this we would need to have a lower impact of the variance variation
							at low number of ratings. Even in our case we chose a threshold which marks the beginning of a plateau, however it still slowly decreases over 
							the number of ratings. Therefore finding a way to weight the number of ratings of our analysis would improve the robustness of our analysis
							and enable to have even more precise results.
						</p>
						<p>
							One way to delve deeper into understanding why a beer might be controversial is by analyzing
							qualitative reviews. While quantitative data analysis is already complex, the true insights behind
							a 7/10 rating, for instance, lie within the qualitative feedback. By using various analysis methods detailed in
							the <a href="https://github.com/epfl-ada/ada-2024-project-abracadabra/blob/main/src/scripts/embeddings/README.md" target="_blank">GitHub</a>,
							we can extract relevant themes from the comments, such as taste, color, and other attributes.
							This approach not only allows us to determine whether the sentiment is positive or negative but
							also uncovers the underlying reasons behind these sentiments.
						</p>
						<p>
 							Although this method of analysis is time-consuming, it offers the potential to uncover deeper insights into what makes a beer controversial.
						</p>
					</div>
				</section>

				<!-- Footer -->
					<footer class="wrapper style1 align-center">
						<div class="inner big">
							<ul class="icons">
								<li>
									<a href="https://github.com/epfl-ada/ada-2024-project-abracadabra" target="_blank" rel="noopener noreferrer">Project Repository</a>
								</li>
								<li>
									<a href="https://github.com/matt762/abracadabra" target="_blank" rel="noopener noreferrer">Website Repository</a>
								</li>
								<li>
									<a href="https://epfl-ada.github.io/teaching/fall2024/cs401/" target="_blank" rel="noopener noreferrer">Course Website</a>
								</li>
							</ul>
							<p>&copy; abracADAbra 2024. Design: <a href="https://html5up.net" target="_blank" rel="noopener noreferrer">HTML5 UP</a>.</p>
						</div>
					</footer>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>